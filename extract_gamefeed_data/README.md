# Extract Savant Gamefeed Data

## 概要
- Savantの試合速報（Gamefeed）データを取得し、このデータに以下の対応を行うものです。
    - X位置の補正（特に左投手）
    - データの追加（リリース位置、スイング判定、空振り判定等、ボール動作角度・回転効率）
    - 値の標準化（リリース位置等）
- データの取得・計算方法は、以下の内容に準拠しています。
    - Gamefeedデータの取得、動作角度・回転効率以外のデータ追加 : [こちらのリポジトリ](https://github.com/jmaschino56/baseball_savant_game_feed_api_downloaded)
    - 動作角度・回転効率 : [こちらのサイト](https://www.kaggle.com/code/s903124/observed-vs-inferred-spin-axis)
> [!NOTE]  
> - VAA・HAAは追って追加予定です。

## 計算内容
本ファイルでは、以下の流れでデータの取得・計算を実施しています。
### 1. Gamefeedデータを取得
- 特定の試合のID(gamePk)を指定し、対象となる試合のGamefeedデータを取得しています。
### 2. Gamefeedデータの補正 （ボール動作角度・回転効率以外）
- 取得したデータから、ボール動作角度・回転効率に関するもの以外の値を計算・追加した上で、値の補正を行います。
- 本計算で追加される主なデータは以下の通りです。
    - release_pos_x : 水平方向のリリース位置 
    - release_pos_y : ホームプレートから見たリリース位置
    - release_pos_z : 垂直方向のリリース位置
    - plate_x_normalized : 水平方向のプレート通過位置を標準化した値
    - plate_z_normalized : 垂直方向のプレート通過位置を標準化した値
    - is_swing : スイング判定フラグ
    - is_whiff : 空振り判定フラグ
### 3. Gamefeedデータの補正 （ボール動作角度・回転効率）
- 取得したデータから、ボールの動作角度・回転効率のデータを計算・追加します。
- 本計算で追加される主なデータは以下の通りです。
    - phi : 動作角度
    - spin_eff : 回転効率
> [!WARNING]  
> - 本方式で回転効率の推定値も取得できますが、実際のSavantデータと比較すると乖離が大きいこと、また1を超える値が出ることもあるため、利用は非推奨です。

## 利用言語・環境等
- 言語はPythonで記述しています。
- ファイルはJupiter Notebook形式（.ipynb）にて保存しています。

## 使い方
- Google Colab等、Jupiter Notebookをご利用可能であれば、順次コードを実行するだけで結果を得ることができます（検証済）。
- .pyファイルとして実行される際は、必要に応じて修正の上ご利用ください。